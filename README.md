# Verilog_Karatsuba
# Генератор умножителя Карацубы

Этот проект представляет собой программу на языке C++, которая генерирует Verilog-описание умножителя, основанного на алгоритме Карацубы, для двух неотрицательных чисел разрядности `N`. Программа принимает на вход целое число `N` и создает файл с Verilog-описанием, реализующим умножение по алгоритму Карацубы.

## Структура проекта

- **main.cpp**: Программа на C++ для генерации Verilog-описания умножителя Карацубы.
- **Makefile**: Скрипт сборки для компиляции программы и выполнения операций очистки.
- **tb_karatsuba_multiplier.v**: Тестбенч для проверки сгенерированного Verilog-модуля.
- **Verilog-файлы**: Сгенерированные Verilog-файлы имеют имена, такие как `karatsuba_multiplier_N.v`, где `N` — разрядность входных чисел.

## Описание алгоритма Карацубы

Алгоритм Карацубы предназначен для быстрого умножения больших чисел. Он уменьшает количество операций умножения за счет разбиения чисел на части, вычисления промежуточных произведений и их последующего комбинирования с меньшей сложностью по сравнению с классическим методом умножения.

Для чисел `A` и `B` разрядности `N` произведение `R` вычисляется по следующей формуле:
A * B = P1 * 2^N + (P3 - P1 - P2) * 2^(N/2) + P2
где:
- `P1 = A1 * B1`
- `P2 = A0 * B0`
- `P3 = (A1 + A0) * (B1 + B0)`

## Как собрать и запустить

### Требования

- Операционная система Linux
- Компилятор `g++` с поддержкой стандарта C++17

### Сборка

Для компиляции программы выполните следующую команду в терминале:

```bash
make
Это скомпилирует файл main.cpp и создаст исполняемый файл с именем karatsuba_gen.


### Запуск
Чтобы сгенерировать Verilog-файл для заданной разрядности N, выполните программу следующим образом:

./karatsuba_gen

После запуска вас попросят ввести разрядность N. После ввода числа программа сгенерирует Verilog-файл с именем karatsuba_multiplier_N.v.

Очистка
Чтобы удалить скомпилированный исполняемый файл и объектные файлы, выполните:

make clean

Чтобы удалить сгенерированные Verilog-файлы:

make clean_verilog

Пример сгенерированного Verilog-описания
Для разрядности N = 16 программа генерирует следующий Verilog-модуль:

module karatsuba_multiplier (
    input  [15:0] A,
    input  [15:0] B,
    output [31:0] R
);
    wire [7:0] A1 = A[15:8];
    wire [7:0] A0 = A[7:0];
    wire [7:0] B1 = B[15:8];
    wire [7:0] B0 = B[7:0];

    wire [15:0] P1 = A1 * B1;
    wire [15:0] P2 = A0 * B0;
    wire [17:0] P3 = (A1 + A0) * (B1 + B0);

    assign R = (P1 << 16) + ((P3 - P1 - P2) << 8) + P2;
endmodule

Тестирование
Тестбенч tb_karatsuba_multiplier.v используется для тестирования сгенерированного Verilog-модуля. В нем задаются несколько тестов с известными результатами для проверки правильности умножения.

`timescale 1ns/1ps

module tb_karatsuba_multiplier;
    reg [15:0] A;
    reg [15:0] B;
    wire [31:0] R;

    karatsuba_multiplier uut (
        .A(A),
        .B(B),
        .R(R)
    );
    initial begin
        A = 16'd10;
        B = 16'd12;
        #10; 
        $display("A = %d, B = %d, R = %d (Expected: 120)", A, B, R);

        A = 16'd255;
        B = 16'd255;
        #10;
        $display("A = %d, B = %d, R = %d (Expected: 65025)", A, B, R);

        A = 16'd1024;
        B = 16'd512;
        #10;
        $display("A = %d, B = %d, R = %d (Expected: 524288)", A, B, R);

        A = 16'd1234;
        B = 16'd5678;
        #10;
        $display("A = %d, B = %d, R = %d (Expected: 7006652)", A, B, R);

        A = 16'd65535;
        B = 16'd65535;
        #10;
        $display("A = %d, B = %d, R = %d (Expected: 4294836225)", A, B, R);

        $finish;
    end
endmodule

Пример вывода тестов

A =    10, B =    12, R =        120 (Expected: 120)
A =   255, B =   255, R =      65025 (Expected: 65025)
A =  1024, B =   512, R =     524288 (Expected: 524288)
A =  1234, B =  5678, R =    7006652 (Expected: 7006652)
A = 65535, B = 65535, R = 4294836225 (Expected: 4294836225)



